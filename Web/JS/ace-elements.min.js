"ace"in window||(window.ace={}),jQuery(function(){window.ace.click_event=$.fn.tap?"tap":"click"}),function(e,t){var n="multiple"in document.createElement("INPUT"),i="FileList"in window,s="FileReader"in window,l=function(t,n){var i=this;this.settings=e.extend({},e.fn.ace_file_input.defaults,n),this.$element=e(t),this.element=t,this.disabled=!1,this.can_reset=!0,this.$element.on("change.ace_inner_call",function(e,t){return t!==!0?o.call(i):void 0}),this.$element.wrap('<div class="ace-file-input" />'),this.apply_settings()};l.error={FILE_LOAD_FAILED:1,IMAGE_LOAD_FAILED:2,THUMBNAIL_FAILED:3},l.prototype.apply_settings=function(){var e=this,t=!!this.settings.icon_remove;this.multi=this.$element.attr("multiple")&&n,this.well_style="well"==this.settings.style,this.well_style?this.$element.parent().addClass("ace-file-multiple"):this.$element.parent().removeClass("ace-file-multiple"),this.$element.parent().find(":not(input[type=file])").remove(),this.$element.after('<label class="file-label" data-title="'+this.settings.btn_choose+'"><span class="file-name" data-title="'+this.settings.no_file+'">'+(this.settings.no_icon?'<i class="'+this.settings.no_icon+'"></i>':"")+"</span></label>"+(t?'<a class="remove" href="#"><i class="'+this.settings.icon_remove+'"></i></a>':"")),this.$label=this.$element.next(),this.$label.on("click",function(){this.disabled||e.element.disabled||e.$element.attr("readonly")||e.$element.click()}),t&&this.$label.next("a").on(ace.click_event,function(){if(!e.can_reset)return!1;var t=!0;return e.settings.before_remove&&(t=e.settings.before_remove.call(e.element)),t?e.reset_input():!1}),this.settings.droppable&&i&&a.call(this)},l.prototype.show_file_list=function(t){var n="undefined"==typeof t?this.$element.data("ace_input_files"):t;if(n&&0!=n.length){this.well_style&&(this.$label.find(".file-name").remove(),this.settings.btn_change||this.$label.addClass("hide-placeholder")),this.$label.attr("data-title",this.settings.btn_change).addClass("selected");for(var i=0;i<n.length;i++){var l="string"==typeof n[i]?n[i]:e.trim(n[i].name),a=l.lastIndexOf("\\")+1;0==a&&(a=l.lastIndexOf("/")+1),l=l.substr(a);var o="icon-file";if(/\.(jpe?g|png|gif|svg|bmp|tiff?)$/i.test(l)?o="icon-picture":/\.(mpe?g|flv|mov|avi|swf|mp4|mkv|webm|wmv|3gp)$/i.test(l)?o="icon-film":/\.(mp3|ogg|wav|wma|amr|aac)$/i.test(l)&&(o="icon-music"),this.well_style){this.$label.append('<span class="file-name" data-title="'+l+'"><i class="'+o+'"></i></span>');var c=e.trim(n[i].type),d=s&&this.settings.thumbnail&&(c.length>0&&c.match("image")||0==c.length&&"icon-picture"==o);if(d){var u=this;e.when(r.call(this,n[i])).fail(function(e){u.settings.preview_error&&u.settings.preview_error.call(u,l,e.code)})}}else this.$label.find(".file-name").attr({"data-title":l}).find('[class*="icon-"]').attr("class",o)}return!0}},l.prototype.reset_input=function(){return this.$label.attr({"data-title":this.settings.btn_choose,"class":"file-label"}).find(".file-name:first").attr({"data-title":this.settings.no_file,"class":"file-name"}).find('[class*="icon-"]').attr("class",this.settings.no_icon).prev("img").remove(),this.settings.no_icon||this.$label.find('[class*="icon-"]').remove(),this.$label.find(".file-name").not(":first").remove(),this.$element.data("ace_input_files")&&(this.$element.removeData("ace_input_files"),this.$element.removeData("ace_input_method")),this.reset_input_field(),!1},l.prototype.reset_input_field=function(){this.$element.wrap("<form>").closest("form").get(0).reset(),this.$element.unwrap()},l.prototype.enable_reset=function(e){this.can_reset=e},l.prototype.disable=function(){this.disabled=!0,this.$element.attr("disabled","disabled").addClass("disabled")},l.prototype.enable=function(){this.disabled=!1,this.$element.removeAttr("disabled").removeClass("disabled")},l.prototype.files=function(){return e(this).data("ace_input_files")||null},l.prototype.method=function(){return e(this).data("ace_input_method")||""},l.prototype.update_settings=function(t){this.settings=e.extend({},this.settings,t),this.apply_settings()};var a=function(){var t=this,n=this.element.parentNode;e(n).on("dragenter",function(e){e.preventDefault(),e.stopPropagation()}).on("dragover",function(e){e.preventDefault(),e.stopPropagation()}).on("drop",function(e){e.preventDefault(),e.stopPropagation();var n=e.originalEvent.dataTransfer,s=n.files;if(!t.multi&&s.length>1){var l=[];l.push(s[0]),s=l}var a=!0;return t.settings.before_change&&(a=t.settings.before_change.call(t.element,s,!0)),a&&0!=a.length?((a instanceof Array||i&&a instanceof FileList)&&(s=a),t.$element.data("ace_input_files",s),t.$element.data("ace_input_method","drop"),t.show_file_list(s),t.$element.triggerHandler("change",[!0]),!0):!1})},o=function(){var t=!0;if(this.settings.before_change&&(t=this.settings.before_change.call(this.element,this.element.files||[this.element.value],!1)),!t||0==t.length)return this.$element.data("ace_input_files")||this.reset_input_field(),!1;var n=i?t instanceof Array||t instanceof FileList?t:this.element.files:null;if(this.$element.data("ace_input_method","select"),n&&n.length>0)this.$element.data("ace_input_files",n);else{var s=e.trim(this.element.value);s&&s.length>0&&(n=[],n.push(s),this.$element.data("ace_input_files",n))}return n&&0!=n.length?(this.show_file_list(n),!0):!1},r=function(t){var n=this,i=n.$label.find(".file-name:last"),s=new e.Deferred,a=new FileReader;return a.onload=function(a){i.prepend("<img class='middle' style='display:none;' />");var o=i.find("img:last").get(0);e(o).one("load",function(){var a=50;"large"==n.settings.thumbnail?a=150:"fit"==n.settings.thumbnail&&(a=i.width()),i.addClass(a>50?"large":"");var r=c(o,a,t.type);if(null==r)return e(this).remove(),void s.reject({code:l.error.THUMBNAIL_FAILED});var d=r.w,u=r.h;"small"==n.settings.thumbnail&&(d=u=a),e(o).css({"background-image":"url("+r.src+")",width:d,height:u}).data("thumb",r.src).attr({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="}).show(),s.resolve()}).one("error",function(){i.find("img").remove(),s.reject({code:l.error.IMAGE_LOAD_FAILED})}),o.src=a.target.result},a.onerror=function(){s.reject({code:l.error.FILE_LOAD_FAILED})},a.readAsDataURL(t),s.promise()},c=function(e,t){var n=e.width,i=e.height;(n>t||i>t)&&(n>i?(i=parseInt(t/n*i),n=t):(n=parseInt(t/i*n),i=t));var s;try{var l=document.createElement("canvas");l.width=n,l.height=i;var a=l.getContext("2d");a.drawImage(e,0,0,e.width,e.height,0,0,n,i),s=l.toDataURL()}catch(o){s=null}return/^data\:image\/(png|jpe?g|gif);base64,[0-9A-Za-z\+\/\=]+$/.test(s)||(s=null),s?{src:s,w:n,h:i}:null};e.fn.ace_file_input=function(n,i){var s,a=this.each(function(){var t=e(this),a=t.data("ace_file_input"),o="object"==typeof n&&n;a||t.data("ace_file_input",a=new l(this,o)),"string"==typeof n&&(s=a[n](i))});return s===t?a:s},e.fn.ace_file_input.defaults={style:!1,no_file:"No File ...",no_icon:"icon-upload-alt",btn_choose:"Choose",btn_change:"Change",icon_remove:"icon-remove",droppable:!1,thumbnail:!1,before_change:null,before_remove:null,preview_error:null}}(window.jQuery),function(e){e.fn.ace_spinner=function(t){return this.each(function(){var n=t.icon_up||"icon-chevron-up",i=t.icon_down||"icon-chevron-down",s=t.on_sides||!1,l=t.btn_up_class||"",a=t.btn_down_class||"",o=t.max||999;o=(""+o).length,e(this).addClass("spinner-input form-control").wrap('<div class="ace-spinner">');var r=e(this).closest(".ace-spinner").spinner(t).wrapInner("<div class='input-group'></div>");s?(e(this).before('<div class="spinner-buttons input-group-btn">							<button type="button" class="btn spinner-down btn-xs '+a+'">								<i class="'+i+'"></i>							</button>						</div>').after('<div class="spinner-buttons input-group-btn">							<button type="button" class="btn spinner-up btn-xs '+l+'">								<i class="'+n+'"></i>							</button>						</div>'),r.addClass("touch-spinner"),r.css("width",20*o+40+"px")):(e(this).after('<div class="spinner-buttons input-group-btn">							<button type="button" class="btn spinner-up btn-xs '+l+'">								<i class="'+n+'"></i>							</button>							<button type="button" class="btn spinner-down btn-xs '+a+'">								<i class="'+i+'"></i>							</button>						</div>'),"ontouchend"in document||t.touch_spinner?(r.addClass("touch-spinner"),r.css("width",20*o+40+"px")):(e(this).next().addClass("btn-group-vertical"),r.css("width",20*o+10+"px"))),e(this).on("mousewheel DOMMouseScroll",function(e){var t=e.originalEvent.detail<0||e.originalEvent.wheelDelta>0?1:-1;return r.spinner("step",t>0),r.spinner("triggerChangedEvent"),!1});var c=e(this);r.on("changed",function(){c.trigger("change")})}),this}}(window.jQuery),function(e){e.fn.ace_wizard=function(){return this.each(function(){var t=e(this);t.wizard();var n=t.siblings(".wizard-actions").eq(0),i=t.data("wizard");i.$prevBtn.remove(),i.$nextBtn.remove(),i.$prevBtn=n.find(".btn-prev").eq(0).on(ace.click_event,function(){t.wizard("previous")}).attr("disabled","disabled"),i.$nextBtn=n.find(".btn-next").eq(0).on(ace.click_event,function(){t.wizard("next")}).removeAttr("disabled"),i.nextText=i.$nextBtn.text()}),this}}(window.jQuery),function(e){e.fn.ace_colorpicker=function(t){var n=e.extend({pull_right:!1,caret:!0},t);return this.each(function(){var t=e(this),i="",s="";e(this).hide().find("option").each(function(){var e="colorpick-btn";this.selected&&(e+=" selected",s=this.value),i+='<li><a class="'+e+'" href="#" style="background-color:'+this.value+';" data-color="'+this.value+'"></a></li>'}).end().on("change.ace_inner_call",function(){e(this).next().find(".btn-colorpicker").css("background-color",this.value)}).after('<div class="dropdown dropdown-colorpicker"><a data-toggle="dropdown" class="dropdown-toggle" href="#"><span class="btn-colorpicker" style="background-color:'+s+'"></span></a><ul class="dropdown-menu'+(n.caret?" dropdown-caret":"")+(n.pull_right?" pull-right":"")+'">'+i+"</ul></div>").next().find(".dropdown-menu").on(ace.click_event,function(n){var i=e(n.target);if(!i.is(".colorpick-btn"))return!1;i.closest("ul").find(".selected").removeClass("selected"),i.addClass("selected");var s=i.data("color");return t.val(s).change(),n.preventDefault(),!0})}),this}}(window.jQuery),function(e){e.fn.ace_tree=function(t){var n={"open-icon":"icon-folder-open","close-icon":"icon-folder-close",selectable:!0,"selected-icon":"icon-ok","unselected-icon":"tree-dot"};return n=e.extend({},n,t),this.each(function(){var t=e(this);t.html('<div class = "tree-folder" style="display:none;">				<div class="tree-folder-header">					<i class="'+n["close-icon"]+'"></i>					<div class="tree-folder-name"></div>				</div>				<div class="tree-folder-content"></div>				<div class="tree-loader" style="display:none"></div>			</div>			<div class="tree-item" style="display:none;">				'+(null==n["unselected-icon"]?"":'<i class="'+n["unselected-icon"]+'"></i>')+'				<div class="tree-item-name"></div>			</div>'),t.addClass(1==n.selectable?"tree-selectable":"tree-unselectable"),t.tree(n)}),this}}(window.jQuery),function(e){e.fn.ace_wysiwyg=function(t){var n=e.extend({speech_button:!0,wysiwyg:{}},t),i=["#ac725e","#d06b64","#f83a22","#fa573c","#ff7537","#ffad46","#42d692","#16a765","#7bd148","#b3dc6c","#fbe983","#fad165","#92e1c0","#9fe1e7","#9fc6e7","#4986e7","#9a9cff","#b99aff","#c2c2c2","#cabdbf","#cca6ac","#f691b2","#cd74e6","#a47ae2","#444444"],s={font:{values:["Arial","Courier","Comic Sans MS","Helvetica","Open Sans","Tahoma","Verdana"],icon:"icon-font",title:"Font"},fontSize:{values:{5:"Huge",3:"Normal",1:"Small"},icon:"icon-text-height",title:"Font Size"},bold:{icon:"icon-bold",title:"Bold (Ctrl/Cmd+B)"},italic:{icon:"icon-italic",title:"Italic (Ctrl/Cmd+I)"},strikethrough:{icon:"icon-strikethrough",title:"Strikethrough"},underline:{icon:"icon-underline",title:"Underline"},insertunorderedlist:{icon:"icon-list-ul",title:"Bullet list"},insertorderedlist:{icon:"icon-list-ol",title:"Number list"},outdent:{icon:"icon-indent-left",title:"Reduce indent (Shift+Tab)"},indent:{icon:"icon-indent-right",title:"Indent (Tab)"},justifyleft:{icon:"icon-align-left",title:"Align Left (Ctrl/Cmd+L)"},justifycenter:{icon:"icon-align-center",title:"Center (Ctrl/Cmd+E)"},justifyright:{icon:"icon-align-right",title:"Align Right (Ctrl/Cmd+R)"},justifyfull:{icon:"icon-align-justify",title:"Justify (Ctrl/Cmd+J)"},createLink:{icon:"icon-link",title:"Hyperlink",button_text:"Add",placeholder:"URL",button_class:"btn-primary"},unlink:{icon:"icon-unlink",title:"Remove Hyperlink"},insertImage:{icon:"icon-picture",title:"Insert picture",button_text:'<i class="icon-file"></i> Choose Image &hellip;',placeholder:"Image URL",button_insert:"Insert",button_class:"btn-success",button_insert_class:"btn-primary",choose_file:!0},foreColor:{values:i,title:"Change Color"},backColor:{values:i,title:"Change Background Color"},undo:{icon:"icon-undo",title:"Undo (Ctrl/Cmd+Z)"},redo:{icon:"icon-repeat",title:"Redo (Ctrl/Cmd+Y)"},viewSource:{icon:"icon-code",title:"View Source"}},l=n.toolbar||["font",null,"fontSize",null,"bold","italic","strikethrough","underline",null,"insertunorderedlist","insertorderedlist","outdent","indent",null,"justifyleft","justifycenter","justifyright","justifyfull",null,"createLink","unlink",null,"insertImage",null,"foreColor",null,"undo","redo",null,"viewSource"];return this.each(function(){var t=' <div class="wysiwyg-toolbar btn-toolbar center"> <div class="btn-group"> ';for(var i in l)if(l.hasOwnProperty(i)){var a=l[i];if(null===a){t+=' </div> <div class="btn-group"> ';continue}if("string"==typeof a&&a in s)a=s[a],a.name=l[i];else{if(!("object"==typeof a&&a.name in s))continue;a=e.extend(s[a.name],a)}var o="className"in a?a.className:"";switch(a.name){case"font":t+=' <a class="btn btn-sm '+o+' dropdown-toggle" data-toggle="dropdown" title="'+a.title+'"><i class="'+a.icon+'"></i><i class="icon-angle-down icon-on-right"></i></a> ',t+=' <ul class="dropdown-menu dropdown-light">';for(var r in a.values)a.values.hasOwnProperty(r)&&(t+=' <li><a data-edit="fontName '+a.values[r]+'" style="font-family:\''+a.values[r]+"'\">"+a.values[r]+"</a></li> ");t+=" </ul>";break;case"fontSize":t+=' <a class="btn btn-sm '+o+' dropdown-toggle" data-toggle="dropdown" title="'+a.title+'"><i class="'+a.icon+'"></i>&nbsp;<i class="icon-angle-down icon-on-right"></i></a> ',t+=' <ul class="dropdown-menu dropdown-light"> ';for(var c in a.values)a.values.hasOwnProperty(c)&&(t+=' <li><a data-edit="fontSize '+c+'"><font size="'+c+'">'+a.values[c]+"</font></a></li> ");t+=" </ul> ";break;case"createLink":t+=' <div class="inline position-relative"> <a class="btn btn-sm '+o+' dropdown-toggle" data-toggle="dropdown" title="'+a.title+'"><i class="'+a.icon+'"></i></a> ',t+=' <div class="dropdown-menu dropdown-caret pull-right">							<div class="input-group">								<input class="form-control" placeholder="'+a.placeholder+'" type="text" data-edit="'+a.name+'" />								<span class="input-group-btn">									<button class="btn btn-sm '+a.button_class+'" type="button">'+a.button_text+"</button>								</span>							</div>						</div> </div>";break;case"insertImage":t+=' <div class="inline position-relative"> <a class="btn btn-sm '+o+' dropdown-toggle" data-toggle="dropdown" title="'+a.title+'"><i class="'+a.icon+'"></i></a> ',t+=' <div class="dropdown-menu dropdown-caret pull-right">							<div class="input-group">								<input class="form-control" placeholder="'+a.placeholder+'" type="text" data-edit="'+a.name+'" />								<span class="input-group-btn">									<button class="btn btn-sm '+a.button_insert_class+'" type="button">'+a.button_insert+"</button>								</span>							</div>",a.choose_file&&"FileReader"in window&&(t+='<div class="space-2"></div>							 <div class="center">								<button class="btn btn-sm '+a.button_class+' wysiwyg-choose-file" type="button">'+a.button_text+'</button>								<input type="file" data-edit="'+a.name+'" />							  </div>'),t+=" </div> </div>";break;case"foreColor":case"backColor":t+=' <select class="hide wysiwyg_colorpicker" title="'+a.title+'"> ';for(var d in a.values)t+=' <option value="'+a.values[d]+'">'+a.values[d]+"</option> ";t+=" </select> ",t+=' <input style="display:none;" disabled class="hide" type="text" data-edit="'+a.name+'" /> ';break;case"viewSource":t+=' <a class="btn btn-sm '+o+'" data-view="source" title="'+a.title+'"><i class="'+a.icon+'"></i></a> ';break;default:t+=' <a class="btn btn-sm '+o+'" data-edit="'+a.name+'" title="'+a.title+'"><i class="'+a.icon+'"></i></a> '}}t+=" </div> </div> ",t=n.toolbar_place?n.toolbar_place.call(this,t):e(this).before(t).prev(),t.find("a[title]").tooltip({animation:!1,container:"body"}),t.find(".dropdown-menu input:not([type=file])").on(ace.click_event,function(){return!1}).on("change",function(){e(this).closest(".dropdown-menu").siblings(".dropdown-toggle").dropdown("toggle")}).on("keydown",function(t){27==t.which&&(this.value="",e(this).change())}),t.find("input[type=file]").prev().on(ace.click_event,function(){e(this).next().click()}),t.find(".wysiwyg_colorpicker").each(function(){e(this).ace_colorpicker({pull_right:!0}).change(function(){e(this).nextAll("input").eq(0).val(this.value).change()}).next().find(".btn-colorpicker").tooltip({title:this.title,animation:!1,container:"body"})});var u;if(n.speech_button&&"onwebkitspeechchange"in(u=document.createElement("input"))){var h=e(this).offset();t.append(u),e(u).attr({type:"text","data-edit":"inserttext","x-webkit-speech":""}).addClass("wysiwyg-speech-input").css({position:"absolute"}).offset({top:h.top,left:h.left+e(this).innerWidth()-35})}else u=null;var p=e(this),f=!1;t.find("a[data-view=source]").on("click",function(t){if(t.preventDefault(),f){var n=p.next();p.html(n.val()).show(),n.remove(),e(this).removeClass("active")}else e("<textarea />").css({width:p.outerWidth(),height:p.outerHeight()}).val(p.html()).insertAfter(p),p.hide(),e(this).addClass("active");f=!f});var v=e.extend({},{activeToolbarClass:"active",toolbarSelector:t},n.wysiwyg||{});e(this).wysiwyg(v)}),this}}(window.jQuery);