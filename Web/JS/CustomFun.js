
/*消息提示*/
function msg_disp_ms(a, d)
{
    if (getIsPhone())
    {
        alert(a);
        location.href = location.href;
    }
    else {
        alert(a);
        location.href = location.href;
    }
}
function msg_disp(a)
{
    if(getIsPhone())
    {
        alert(a);
        location.href = location.href;
    }
    else
    {
        alert(a);
        location.href = location.href;
    }
}
function msg_disp2(a, d, c)
{
    void 0 == d && (d = 1500); a = "\x3cdiv class\x3d'float_div'style\x3d'border-radius:3px;position:fixed;top:0;left:0;background:rgba(0,0,0,0.8);padding:10px 3px;min-width:100px;opacity:1;min-height:25px;text-align:center;color:#fff;display:block;z-index:999'\x3e\x3cp style\x3d'color:#fff;'\x3e" + a + "\x3cp/\x3e\x3c/div\x3e"; $("body").append($(a).css({ position: "absolute", display: "none", width: "90%", height: "auot" })); var b = $(".float_div"); a = $(window).width(); c = window.screen.height * c + $(window).scrollTop(); var e = b.width(); b.height(); b.css({ top: c + "px", left: (a - e - 6) / 2 + "px" }).fadeIn("normal").delay(d).animate({ top: $(window).height() + $(window).scrollTop() - 11 * b.height() + "px", opacity: "hide" }, 0, function () { b.remove(); location.href = location.href })
}

function msg_url_ms(a, d, c)
{
    if(getIsPhone()){
        alert(a);
        location.href = c;
    }else{
        alert(a); 
        location.href = c;
    }
}

function msg_url(a, d)
{
    if(getIsPhone()){
        //msg_url_base(a, 1500, .3, d)
        alert(a);
        location.href = d;
    }
    else {
        alert(a);
        location.href = d;
    }
}

function msg_url_base(a, d, c, b)
{
    void 0 == d && (d = 1500); a = "\x3cdiv class\x3d'float_div'style\x3d'border-radius:3px;position:fixed;top:0;left:0;background:rgba(0,0,0,0.8);padding:10px 3px;min-width:100px;opacity:1;min-height:25px;text-align:center;color:#fff;display:block;z-index:999'\x3e\x3cp style\x3d'color:#fff;'\x3e" + a + "\x3cp/\x3e\x3c/div\x3e"; $("body").append($(a).css({ position: "absolute", display: "none", width: "90%", height: "auot" })); var e = $(".float_div"); a = $(window).width(); c = window.screen.height * c + $(window).scrollTop(); var g = e.width(); e.height(); e.css({ top: c + "px", left: (a - g - 6) / 2 + "px" }).fadeIn("normal").delay(d).animate({ top: $(window).height() + $(window).scrollTop() - 11 * e.height() + "px", opacity: "hide" }, 0, function () { e.remove(); location.href = b })
} function confirm_disp(a, d, c) { a = "\x3cdiv class\x3d'float_div'style\x3d'font-seze:14px;border-radius:3px;position:fixed;top:0;left:0;background:rgba(0,0,0,0.8);padding:20px 0px 15px 0px;min-width:100px;opacity:1;text-align:center;color:#fff;display:block;z-index:999'\x3e\x3cdiv style\x3d'width:100%;height:50px;font-size:14px;'\x3e" + a + "\x3c/div\x3e\x3cdidv style\x3d'width:100%;height:30px;padding:5px'\x3e\x3cinput type\x3d'button'  onclick\x3d'close_disp();' style\x3d'padding:3px 20px 3px 20px;float:left;margin:5px 0px 10px 40px' id\x3d'_confirm_disp_cancel' value\x3d'\u5426'/\x3e\x3cinput type\x3d'button' style\x3d'padding:3px 20px 3px 20px;float:right;margin:5px 40px 10px 0px;' id\x3d'_confirm_disp_enter' value\x3d'\u662f'/\x3e\x3c/div\x3e\x3c/div\x3e"; $("body").append($(a).css({ position: "absolute", display: "none", width: "242px", height: "80px" })); a = $(".float_div"); var b = $(window).width(), e = .3 * $(window).height() + $(window).scrollTop(), g = a.width(); a.height(); var f = a.css({ top: e + "px", left: (b - g) / 2 + "px", display: "block" }); $("#_confirm_disp_cancel").on("click", function (a) { d(!1, c); f.remove() }); $("#_confirm_disp_enter").on("click", function (a) { d(!0, c); f.remove() }) } function SetCookie(a, d) { var c = new Date; c.setTime(c.getTime() + 6E5); document.cookie = a + "\x3d" + escape(d) + ";expires\x3d" + c.toGMTString() } function getCookie(a) { a = document.cookie.match(new RegExp("(^| )" + a + "\x3d([^;]*)(;|$)")); return null != a ? unescape(a[2]) : null } function delCookie(a) { var d = new Date; d.setTime(d.getTime() - 1); var c = getCookie(a); null != c && (document.cookie = a + "\x3d" + c + ";expires\x3d" + d.toGMTString()) } function InitialJsonData(a, d) { var c = a.length; if (0 == c) d(a.length); else for (var b = 0; b < a.length; b++) try { null == storage.getItem(a[b]) || 2 >= storage.getItem(a[b]).length ? $.get("/ajax/StorageData.ashx", { dataTag: a[b], data: "" }, function (a) { c--; null != a && 0 < a.toString().length && (a = a.split("/,"), storage.removeItem(a[0]), storage.setItem(a[0], a[1])); 0 == c && "function" === typeof d && d() }) : (c--, 0 == c && d()) } catch (e) { console.log("InitialJsonData:" + a[b] + "  err") } } function getJsonObj(a, d) { try { return null == storage.getItem(a) || 2 >= storage.getItem(a).length ? ($.get("/ajax/StorageData.ashx", { dataTag: a, data: d }, function (a) { null != a && 0 < a.toString().length && (a = a.split("/,"), storage.removeItem(a[0]), storage.setItem(a[0], a[1])) }), $.parseJSON("")) : $.parseJSON(storage.getItem(a)) } catch (c) { console.log("getJsonObj:" + c) } } var storage = window.localStorage; function getInitJsonObj(a, d) { for (var c = a.length, b = 0; b < a.length; b++) $.get("/ajax/StorageData.ashx", { dataTag: a[b], data: "" }, function (a) { c--; null != a && 0 < a.toString().length ? (a = a.split("/,"), storage.removeItem(a[0]), storage.setItem(a[0], a[1])) : console.log(a + ":err"); 0 == c && InitJsonObj(d, "init") }) } function ddlSubBinding(a, d, c) { try { var b = getJsonObj(d, ""); $("#" + a + " option").remove(); $.each(b[c], function (b, c) { $("#" + a).append("\x3coption value\x3d'" + c.ddlValue + "'\x3e" + c.ddlText + "\x3c/option\x3e") }); $("#" + a).change() } catch (e) { console.log(a + ":err") } } function ddlBinding(a, d) { $("#" + a + " option").remove(); try { $.each(d, function (b, c) { $("#" + a).append("\x3coption value\x3d'" + c.ddlValue + "'\x3e" + c.ddlText + "\x3c/option\x3e") }) } catch (c) { console.log(a + ":err") } } function formInitial(a) { var d = !0, c = []; try { for (var b = 0; b < a.length; b++) if ($(a[b]).data("init") && 0 < $(a[b]).data("init").toString().length) for (var e = $(a[b]).data("init").split("/,"), g = 0; g < e.length; g++) if (checkTime(e[g]) || null == storage.getItem(e[g]) || 2 >= storage.getItem(e[g]).length) d = !1, c[0 == c.length ? 0 : c.length] = e[g]; 0 < c.length ? getInitJsonObj(c, a) : d && InitJsonObj(a, "init") } catch (f) { console.log("0:err") } } function checkTime(a) { try { var d = (new Date).getTime(); return null == storage.getItem("overtime") || 12E5 < Math.abs(d - parseInt(storage.getItem("overtime"))) ? (storage.setItem("overtime", d), !1) : !0 } catch (c) { return storage.setItem("overtime", d), !1 } } function InitJsonObj(a, d) { for (var c = 0; c < a.length; c++) if ($(a[c]).data(d) && 0 < $(a[c]).data(d).toString().length) { $(a[c]).data(d); var b = $(a[c]); b.is("input") ? b.attr("type") : b.is("select") ? SelectInitial($(a[c]), d) : b.is("textarea") } } function SelectInitial(a, d) { try { var c = $(a).data(d).toString().split("/,"), b = null; null != $(a).data("val") && 0 < $(a).data("val").toString().length && (b = $(a).data("val").toString().split("/,")); if ($(a).data("ids") && 0 < $(a).data("ids").toString().length && 1 < c.length) { for (var e = $(a).data("ids").split("/,"), g = 0; g < e.length - 1; g++) { var f = $("#" + e[g]); f.data("para1", e[g + 1]); f.data("para2", c[g + 1]); $("#" + e[g]).change(function () { $(this).data("text", $(this).find("option:selected").text()); ddlSubBinding($(this).data("para1"), $(this).data("para2"), $(this).val()) }) } if (null != b) for (ddlBinding($(a).attr("id"), getJsonObj(c[0], "")), c = 0; c < b.length; c++) $("#" + e[c]).val(b[c]), $("#" + e[c]).change(); else ddlBinding($(a).attr("id"), getJsonObj(c[0], "")), $(a).change() } else ddlBinding($(a).attr("id"), getJsonObj(c[0], "")), $(a).change(function () { $(this).data("text", $(this).find("option:selected").text()) }), null != b && $(a).val(b[0]), $(a).change() } catch (h) { console.log($(a).data(d) + ":err  " + h.toString()) } } var msgFun = null; function formVerification(a, d) { try { "function" === typeof d && (msgFun = d); for (var c = !0, b = 0; b < a.length; b++) { if ($(a[b]).data("valid_customfun") && 0 < $(a[b]).data("valid_customfun").toString().length) { var e = $(a[b]).data("valid_customfun"), g = $(a[b]); if (g.is("input")) { var f = g.attr("type"); if ("radio" != f && "checkbox" != f && "submit" != f && "file" != f && "image" != f && ("text" == f || "password" == f)) { if (void 0 != $(a[b]).data("required") && 0 == $(a[b]).data("required") && "" == $(a[b]).val()) continue; c = valuecheck($(a[b]), e) } } else if (g.is("select")) c = valuecheck($(a[b]).find("option:selected"), e); else if (g.is("textarea")) { if (void 0 != $(a[b]).data("required") && 0 == $(a[b]).data("required") && "" == $(a[b]).val()) continue; c = valuecheck($(a[b]), e) } } if (!c) break } return c } catch (h) { return !1 } } function valuecheck(a, d) { var c = $(a).val(), b = d.split("/,"); if ("text" == b[0]) { var e = parseInt(b[1]), g = parseInt(b[2]), f = b[3]; if (c.length < e || c.length > g) return msgUtil(f, a), !1; if (5 <= b.length && null != b[4] && 0 < b[4].toString()) { var h = b[4].toString(); if (!h.test(c)) return msgUtil(f, a), !1 } } if ("email" == b[0]) { f = b[1]; h = /[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/; if (!h.test(c)) return msgUtil(f, a), !1; if (3 <= b.length && null != b[2] && 0 < b[2].toString()) { e = b[2].split("|"); g = !1; for (h = 0; h < e.length; h++) 0 < c.lastIndexOf(e[h]) && (g = !0); if (!g) return msgUtil(f, a), !1 } } if ("pwd" == b[0] && (e = parseInt(b[1]), g = parseInt(b[2]), f = b[3], h = /^[a-zA-Z0-9]{1,100}$/, c.length < e || c.length > g || !h.test(c))) return msgUtil(f, a), !1; if ("pwd2" == b[0]) { var e = parseInt(b[1]), g = parseInt(b[2]), k = b[3], f = b[4], h = /^[a-zA-Z0-9]{1,100}$/; if (c.length < e || c.length > g || !h.test(c)) return msgUtil(f, a), !1; e = $(k); if (null != e && e.val() != c) return msgUtil(f, a), !1 } return "tel" == b[0] && (f = b[1], h = /\d{3}-\d{8}|\d{4}-\d{7}/, !h.test(c)) || "num" == b[0] && (e = parseInt(b[1]), g = parseInt(b[2]), f = b[3], h = /^-?[1-9]\d*$/, c.length < e || c.length > g || !h.test(c) || 5 <= b.length && null != b[4] && 0 < b[4].toString() && (e = b[4].toString(), !e.test(c))) || "phone" == b[0] && (f = b[1], h = /^0?(13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])[0-9]{8}$/, !h.test(c)) || "globalphone" == b[0] && (f = b[1], h = /(\+)?[1-9]\d{8,11}/, !h.test(c)) || "telorphone" == b[0] && (f = b[1], h = /(^(\d{3,4}-)?\d{7,8})$|(1[3|4|5|7|8|][0-9]{9})/, !h.test(c)) || "idcar" == b[0] && (f = b[1], h = /\d{15}|\d{18}/, !h.test(c) || 3 <= b.length && null != b[2] && 0 < b[2].toString() && (e = b[2].toString(), !e.test(c))) || "regex" == b[0] && (f = b[1].toString(), h = b[2].toString(), !h.test(c)) || "select" == b[0] && (f = b[2], b[1] == c || 4 <= b.length && null != b[3] && 0 < b[3].toString() && (e = b[3].toString(), !e.test(c))) ? (msgUtil(f, a), !1) : !0 } function msgUtil(a, d) { null != msgFun && "function" === typeof msgFun ? 1 == msgFun.length ? msgFun(a) : msgFun(a, d) : msg_disp(a) } function AJAXFun(a) { $.get(a, function (a) { 0 >= a.toString().length ? msg_disp1("\u60a8\u5df2\u53d1\u5e03\u8fc7\u8be5\u7c7b\u522b\u4fe1\u606f\uff01") : "err" == a.toString() ? msg_disp1("\u7cfb\u7edf\u51fa\u9519\uff01") : location.href = a.toString() }) } function is_weixn() { return "micromessenger" == navigator.userAgent.toLowerCase().match(/MicroMessenger/i) ? !0 : !1 } function checkHeight(a) { $("#" + a).height(function () { return parseInt($(this).css("line-height")) * get_text_rows(this) }) } function get_text_rows(a) { for (var d = $(a).val().split("\n"), c = d.length, b = 0; b < d.length; b++) { var e = Math.ceil(parseInt($(a).css("font-size")) * d[b].length / $(a).width()); 1 < e && (c += e - 1) } return c + 1 } function getDriverInfo() { return getDriverCode() + "|" + getPhoneType() + "|" + getBrowserInfo() } function getPhoneType() { var a = navigator.platform, d = navigator.userAgent.toLowerCase(), c = /android/i.test(d), b = /iphone/i.test(d), e = /win/i.test(a), g = /mac/i.test(a), f = /linux/i.test(a), h = /x11/i.test(a), k = "phoneType"; c ? (a = d.indexOf("-"), c = d.indexOf("build", a + 4), k = d.substring(a, c).split(";")[1]) : b ? (d = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth, a = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight, k = (1080 == d && 1920 == a ? "iphone6 plus" : 750 == d && 1334 == a ? "iphone6" : 640 == d && 1136 == a ? "iphone 5/5s/5c" : 640 == d && 960 == a ? "iphone 4/4s" : "iphone") + (" " + d + " x " + a)) : k = e ? "Win PC" : g ? "Mac PC" : f ? "Linux PC" : h ? "Unix PC" : 0 < a.length ? a : "\u672a\u77e5\u8bbe\u5907"; return k } function getBrowserInfo() { var a = navigator.userAgent.toLowerCase(), d = /msie [\d.]+;/gi, c = /firefox\/[\d.]+/gi, b = /chrome\/[\d.]+/gi, e = /safari\/[\d.]+/gi, g = /micromessenger\/[\d.]+/gi, f = ""; 0 < a.indexOf("msie") && (f = a.match(d)); 0 < a.indexOf("firefox") && (f = a.match(c)); 0 < a.indexOf("chrome") && (f = a.match(b)); 0 < a.indexOf("safari") && 0 > a.indexOf("chrome") && (f = a.match(e)); 0 < a.indexOf("micromessenger") && (f = a.match(g)); return (f + "").replace("/", " ") } function getBrowserWeiXin() { var a = navigator.userAgent.toLowerCase(), d = /micromessenger\/[\d.]+/gi, c = ""; 0 < a.indexOf("micromessenger") && (c = a.match(d)); return (c + "").replace("/", " ") } function getDriverCode() { var a = navigator.userAgent, d = /Android [\d.]+;/gi, c = /iPhone OS [\d.]+/gi, b = /OS [\d.]_[\d.]+/gi, e = /Windows Phone\/[\d.]+/gi, g = ""; 0 < a.indexOf("Android") && (g = a.match(d)); 0 < a.indexOf("iPhone") && (g = a.match(c)); 0 < a.indexOf("Windows Phone") && (g = a.match(e)); 0 < a.indexOf("iPad") && (g = "Mac " + a.match(b)); if (0 < g.toString().length) return (g + "").replace("/", " ").replace("_", "."); d = navigator.platform; g = -1 < d.indexOf("Win") ? -1 < a.indexOf("Windows NT 5.0") ? "Win2000" : -1 < a.indexOf("Windows NT 5.1") ? "WinXP" : -1 < a.indexOf("Windows NT 5.2") ? "Win2003" : -1 < a.indexOf("Windows NT 6.0") ? "WindowsVista" : -1 < a.indexOf("Windows NT 6.1") || -1 < a.indexOf("Windows 7") ? "Win7" : -1 < a.indexOf("Windows 8") ? "Win8" : "Other" : -1 < d.indexOf("Mac") ? "Mac" : -1 < d.indexOf("X11") ? "Unix" : -1 < d.indexOf("Linux") ? "Linux" : "Other"; return (g + "").replace("/", " ").replace("_", ".") } function getIsPhone() { var a = navigator.userAgent; if (0 < a.indexOf("Android") || 0 < a.indexOf("iPhone") || 0 < a.indexOf("Windows Phone") || 0 < a.indexOf("iPad")) return !0; if (0 < "".toString().length) return "".replace("/", " ").replace("_", "."); var d = navigator.platform; -1 < d.indexOf("Win") ? -1 < a.indexOf("Windows NT 5.0") || -1 < a.indexOf("Windows NT 5.1") || -1 < a.indexOf("Windows NT 5.2") || -1 < a.indexOf("Windows NT 6.0") || -1 < a.indexOf("Windows NT 6.1") || -1 < a.indexOf("Windows 7") || a.indexOf("Windows 8") : -1 < d.indexOf("Mac") || -1 < d.indexOf("X11") || d.indexOf("Linux"); return !1 } function ToggleCode(a, d) { $(a).attr("src", d + "?time\x3d" + Math.random()) };